<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#DC143C">
    <title>–õ–æ–∫–æ –°–æ—Ñ–∏—è –ü–ª—é—Å</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Source+Sans+3:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --red: #DC143C; --black: #0a0a0a; --gray: #1a1a1a; }
        body { font-family: 'Source Sans 3', sans-serif; background: var(--black); color: white; margin: 0; padding-bottom: 80px; }
        .header { background: var(--red); padding: 15px; text-align: center; font-family: 'Oswald', sans-serif; text-transform: uppercase; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .container { padding: 15px; }
        .card { background: var(--gray); border-radius: 12px; padding: 15px; margin-bottom: 15px; border-left: 4px solid var(--red); }
        .title { color: var(--red); font-family: 'Oswald', sans-serif; font-size: 1.2rem; margin-bottom: 12px; text-transform: uppercase; }
        
        /* –°—Ç–∏–ª –∑–∞ –º–∞—á–æ–≤–µ */
        .match-info { text-align: center; }
        .match-teams { display: flex; justify-content: space-around; align-items: center; font-weight: bold; font-size: 1.1rem; }
        .score { font-size: 1.6rem; color: var(--red); margin: 0 10px; }

        /* –¢–∞–±–ª–∏—Ü–∞ */
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        th { text-align: left; color: #888; padding: 8px; border-bottom: 1px solid #333; }
        td { padding: 12px 8px; border-bottom: 1px solid #222; }
        .loko-row { background: rgba(220, 20, 60, 0.2); font-weight: bold; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #111; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #333; z-index: 1000; }
        .nav-item { color: #888; text-decoration: none; font-size: 0.75rem; text-align: center; cursor: pointer; flex: 1; transition: 0.3s; }
        .nav-item.active { color: var(--red); font-weight: bold; }
        .nav-icon { font-size: 1.3rem; display: block; margin-bottom: 2px; }

        /* –ê–∫–∞–¥–µ–º–∏—è –∏ –©–∞–± */
        .staff-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #222; }
        .page { display: none; animation: fadeIn 0.3s ease-in; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">–§–ö –õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è 1929</div>

    <div class="container">
        <div id="page-home" class="page active">
            <div class="title">‚öΩ –°–ª–µ–¥–≤–∞—â –º–∞—á</div>
            <div id="next-match-card" class="card">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏...</div>
            
            <div class="title">üèÜ –ü–æ—Å–ª–µ–¥–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏</div>
            <div id="results-list"></div>
        </div>

        <div id="page-table" class="page">
            <div class="title">üìä –ö–ª–∞—Å–∏—Ä–∞–Ω–µ - –ü—ä—Ä–≤–∞ –õ–∏–≥–∞</div>
            <div class="card" style="padding: 5px;">
                <table>
                    <thead><tr><th>#</th><th>–û—Ç–±–æ—Ä</th><th>–ú</th><th>–¢</th></tr></thead>
                    <tbody id="standings-data"></tbody>
                </table>
            </div>
        </div>

        <div id="page-academy" class="page">
            <div class="title">üéì –î–Æ–® –õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è</div>
            <div class="card">
                <p>–ê–∫–∞–¥–µ–º–∏—è—Ç–∞ –Ω–∞ –õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è –µ –≤ –æ—Å–Ω–æ–≤–∞—Ç–∞ –Ω–∞ —É—Å–ø–µ—Ö–∏—Ç–µ –Ω–∞ –∫–ª—É–±–∞.</p>
                <div class="staff-item"><span>–î–∏—Ä–µ–∫—Ç–æ—Ä –î–Æ–®:</span> <b>–ò–≤–∞–π–ª–æ –ö–æ—Ç–µ–≤</b></div>
                <div class="staff-item"><span>–ë–∞–∑–∞:</span> <b>—Å—Ç. "–õ–æ–∫–æ–º–æ—Ç–∏–≤"</b></div>
            </div>
            <div class="title">üèÜ –§–æ—Ä–º–∞—Ü–∏–∏</div>
            <div class="card">
                <div class="staff-item"><span>–î—É–±–ª–∏—Ä–∞—â –æ—Ç–±–æ—Ä</span> <b>–¢—Ä–µ—Ç–∞ –õ–∏–≥–∞</b></div>
                <div class="staff-item"><span>–ï–ª–∏—Ç–Ω–∏ –≥—Ä—É–ø–∏</span> <b>U17, U15</b></div>
                <div class="staff-item"><span>–ó–æ–Ω–∞–ª–Ω–∏ –≥—Ä—É–ø–∏</span> <b>U19, U16</b></div>
            </div>
        </div>

        <div id="page-staff" class="page">
            <div class="title">üëî –¢—Ä–µ–Ω—å–æ—Ä—Å–∫–∏ —â–∞–±</div>
            <div class="card">
                <div class="staff-item"><span>–ê–Ω—Ç–æ–Ω –í–µ–ª–∫–æ–≤</span> <b>–°—Ç–∞—Ä—à–∏ —Ç—Ä–µ–Ω—å–æ—Ä</b></div>
                <div class="staff-item"><span>–Æ—Ä–∏ –í–∞—Å–µ–≤</span> <b>–ü–æ–º–æ—â–Ω–∏–∫ —Ç—Ä–µ–Ω—å–æ—Ä</b></div>
                <div class="staff-item"><span>–°—Ç–æ–π—á–æ –î—Ä–∞–≥–æ–≤</span> <b>–¢—Ä–µ–Ω—å–æ—Ä –≤—Ä–∞—Ç–∞—Ä–∏</b></div>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="nav-item active" onclick="showPage('page-home', this)"><span class="nav-icon">üè†</span>–ù–∞—á–∞–ª–æ</div>
        <div class="nav-item" onclick="showPage('page-table', this)"><span class="nav-icon">üìä</span>–¢–∞–±–ª–∏—Ü–∞</div>
        <div class="nav-item" onclick="showPage('page-academy', this)"><span class="nav-icon">üéì</span>–ê–∫–∞–¥–µ–º–∏—è</div>
        <div class="nav-item" onclick="showPage('page-staff', this)"><span class="nav-icon">üëî</span>–©–∞–±</div>
    </nav>

    <script>
        const PROXY = "https://api.allorigins.win/raw?url=";
        const BASE_API = "https://api.fclokomotivsofia.bg/api";

        async function init() {
            const cb = `?v=${Date.now()}`;
            try {
                // 1. –ö–ª–∞—Å–∏—Ä–∞–Ω–µ
                const sResp = await fetch(PROXY + encodeURIComponent(BASE_API + "/standings" + cb));
                const standings = await sResp.json();
                document.getElementById('standings-data').innerHTML = standings.map((t, i) => `
                    <tr class="${t.name.includes('–õ–æ–∫–æ–º–æ—Ç–∏–≤') ? 'loko-row' : ''}">
                        <td>${i+1}</td><td>${t.name}</td><td>${t.played}</td><td>${t.points}</td>
                    </tr>`).join('');

                // 2. –°–ª–µ–¥–≤–∞—â –º–∞—á
                const nResp = await fetch(PROXY + encodeURIComponent(BASE_API + "/fixtures/next?limit=1" + cb));
                const next = await nResp.json();
                if(next[0]) {
                    const date = new Date(next[0].date).toLocaleString('bg-BG', {day:'numeric', month:'long', hour:'2-digit', minute:'2-digit'});
                    document.getElementById('next-match-card').innerHTML = `
                        <div class="match-info">
                            <div class="match-teams"><span>${next[0].home_team.short_name}</span> <span>VS</span> <span>${next[0].away_team.short_name}</span></div>
                            <div style="font-size:0.8rem; color:#888; margin-top:5px;">${date} —á. | ${next[0].venue.name}</div>
                        </div>`;
                }

                // 3. –†–µ–∑—É–ª—Ç–∞—Ç–∏
                const rResp = await fetch(PROXY + encodeURIComponent(BASE_API + "/fixtures/results?limit=2" + cb));
                const results = await rResp.json();
                document.getElementById('results-list').innerHTML = results.map(m => `
                    <div class="card" style="border-left-color:#444">
                        <div class="match-teams">
                            <span>${m.home_team.short_name}</span> <span class="score">${m.home_score}:${m.away_score}</span> <span>${m.away_team.short_name}</span>
                        </div>
                    </div>`).join('');

            } catch (e) { console.error("API Error:", e); }
        }

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        init();
        
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js');
        }
    </script>
</body>
</html>
